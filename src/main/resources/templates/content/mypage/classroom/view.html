<!DOCTYPE html>
<html lang="ko"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout/default_layout">

<th:block layout:fragment="html_head">
    <title>TachyonTech Info</title>
</th:block>

<th:block layout:fragment="custom_css">
</th:block>

<th:block layout:fragment="content_body">
    <!--
    <div th:replace="fragments/common/loading"></div>
    -->
    <!--CONTENT CONTAINER-->
    <!--===================================================-->
    <div id="content-container">

        <!--Page Title-->
        <div th:replace="fragments/common/content_title :: content-title"></div>
        <!--Page Title End-->

        <!--Page content-->
        <!--===================================================-->
        <div id="page-content">

            <!-- Basic Data Tables -->
            <!--===================================================-->
            <div class="panel">
                <div class="panel-heading">
                    <h3 class="panel-title"></h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <h4 class="text-success">강의목차</h4>
                        <table class="table table-striped table-bordered" cellspacing="0" width="100%">
                            <colgroup><col width="5%" /><col width="10%" /><col width="40%" /><col width="10%" /><col width="10%" /><col width="15%" /></colgroup>
                            <thead>
                            <th class="text-center">No</th>
                            <th class="text-center">구분</th>
                            <th class="text-center">과정명</th>
<!--                            <th class="text-center">기간</th>-->
                            <th class="text-center">시간</th>
<!--                            <th class="text-center">강사</th>-->
                            <th class="text-center">진도율</th>
                            <th class="text-center"></th>
                            </thead>
                            <tbody>
                            <th:block th:each="section, index : ${course.getSections()}">
                            <tr>
                                <td class="text-center" th:text="${index.count}"}></td>
                                <td class="text-center" th:text="#{label.title.section}"}></td>
                                <td class="text-left" th:text="${section.getName()}"}></td>
<!--                                <td class="text-center" th:text="${section.getFromDate() + ' ~ ' + section.getToDate()}"></td>-->
                                <td class="text-center" th:text="${section.getMinute()} + '분'"}></td>
<!--                                <td class="text-center" th:text="${section.getTeacher()}"}></td>-->
                                <td class="text-left" >

                                    <div class="progress">
                                        <div id="time"  class="progress-bar progress-bar-success"
                                             th:attr="style=${'width:' + T(Math).round((section.getTotalUseSecond()*1.0) / section.getSecond() * 100) + '%'}"
                                             th:text="${T(Math).round((section.getTotalUseSecond()*1.0) / section.getSecond() * 100) + ' %'}">0%</div>
                                    </div>

                                </td>
                                <td class="text-center">
<!--                                    <a href="#" class="btn btn-success" id="popupBtn" onclick="popupPdfView('11', '디티앤사노메딕스')" target="_blank">학습하기</a>-->
<!--                                    <span th:id="${'id' + index.count}" th:text="${section.getId()}"></span>-->

                                    <th:block th:inline="text" th:each="sectionFile : ${section.getSectionFiles()}">
                                        <a href="#" class="btn btn-success" id="popupBtn"
                                           th:onclick="|javascript:popupPdfView('${sectionFile.getId()}');return false;|" target="_blank">학습하기</a>
                                    </th:block>
                                </td>
                            </tr>
                            </th:block>

                            <tr th:each="quiz, index : ${course.getQuizzes()}">
                                <td class="text-center" th:text="${index.count}"></td>
                                <td class="text-center" th:text="#{label.title.quiz}"></td>
                                <td class="text-left">
                                    <a th:href="@{/admin/course/quiz/edit/{id}(id=${quiz.getId()})}">
                                        <span th:text="${quiz.getName()}"></span>
                                    </a>
                                </td>
<!--                                <td class="text-center" th:text="${quiz.getFromDate() + ' ~ ' + quiz.getToDate()}"></td>-->
                                <td class="text-center" th:text="${quiz.getMinute() + '분'}"></td>
<!--                                <td class="text-center"></td>-->
                                <td class="text-left" >
                                    <th:block th:each="actionQuiz : ${quiz.getQuizActions()}">
                                        <div class="progress">
                                            <div id="time2"  class="progress-bar progress-bar-success"
                                                 th:attr="style=${'width:' + T(Math).round((actionQuiz.getTotalUseSecond()*1.0) / actionQuiz.getSecond() * 100) + '%'}"
                                                 th:text="${T(Math).round((actionQuiz.getTotalUseSecond()*1.0) / actionQuiz.getSecond() * 100) + ' %'}">0%</div>
                                        </div>
                                    </th:block>
                                </td>
                                <td class="text-center">
                                    <a href="#" class="btn btn-success" id="popupQuiz"
                                       th:onclick="|javascript:popupQuizView('${quiz.getId()}');return false;|" target="_blank">시험응시</a>
                                </td>
                            </tr>
                            <tr th:each="survey, index : ${course.getSurveys()}">
                                <td class="text-center" th:text="${index.count}"></td>
                                <td class="text-center" th:text="#{label.title.survey}"></td>
                                <td class="text-left">
                                    <a th:href="@{/admin/course/survey/edit/{id}(id=${survey.getId()})}">
                                        <span th:text="${survey.getName()}"></span>
                                    </a>
                                </td>
<!--                                <td class="text-center" th:text="${survey.getFromDate() + ' ~ ' + survey.getToDate()}"}></td>-->
                                <td class="text-center"></td>
                                <td class="text-center"></td>
<!--                                <td class="text-center"></td>-->
                                <td class="text-center">
                                    <a href="#" class="btn btn-success" id="popupSurvey"
                                       th:onclick="|javascript:popupSurveyView('${survey.getId()}');return false;|" target="_blank">참여</a>
                                </td>
                            </tr>

                            </tbody>
                        </table>
                    </div>


                </div><!--panel-body End -->
            </div><!-- panel End -->
        </div><!-- Page content End -->
    </div><!-- Content container End -->
</th:block>

<th:block layout:fragment="custom_js">
    <script>
        function showMessage() {
            alert('준비중입니다..');
        }

        function popupPdfView(id) {
           var width = 1000;
           var height = 720;

            var title = "디티앤사노메딕스";
            var url = "/mypage/classroom/pdfview/" + id;
            // 만들 팝업창 좌우 크기의 1/2 만큼 보정값으로 빼주었음
            var popupX = (window.screen.width / 2) - (width / 2);
            // 만들 팝업창 상하 크기의 1/2 만큼 보정값으로 빼주었음
            var popupY= (window.screen.height / 2) - (height / 2);

            var option = "width =" + width + ", height =" + height + ", menubar=no, directories=no, location = no, scrollbars=no, resizable=no";
            option += ", left=" + popupX + ", top=" + popupY;

            window.open(url, title, option);
        }

        function popupQuizView(id) {
            var width = 1000;
            var height = 720;

            var title = "디티앤사노메딕스";
            var url = "/mypage/classroom/quizview/" + id;
            // 만들 팝업창 좌우 크기의 1/2 만큼 보정값으로 빼주었음
            var popupX = (window.screen.width / 2) - (width / 2);
            // 만들 팝업창 상하 크기의 1/2 만큼 보정값으로 빼주었음
            var popupY= (window.screen.height / 2) - (height / 2);

            var option = "width =" + width + ", height =" + height + ", menubar=no, directories=no, location = no, scrollbars=no, resizable=no";
            option += ", left=" + popupX + ", top=" + popupY;

            window.open(url, title, option);
        }

        function popupSurveyView(id) {
            var width = 1000;
            var height = 720;

            var title = "디티앤사노메딕스";
            var url = "/mypage/classroom/surveyview/" + id;
            // 만들 팝업창 좌우 크기의 1/2 만큼 보정값으로 빼주었음
            var popupX = (window.screen.width / 2) - (width / 2);
            // 만들 팝업창 상하 크기의 1/2 만큼 보정값으로 빼주었음
            var popupY= (window.screen.height / 2) - (height / 2);

            var option = "width =" + width + ", height =" + height + ", menubar=no, directories=no, location = no, scrollbars=no, resizable=no";
            option += ", left=" + popupX + ", top=" + popupY;

            window.open(url, title, option);
        }

    </script>
</th:block>

</html>